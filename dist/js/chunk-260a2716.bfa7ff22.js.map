{"version":3,"sources":["webpack:///./src/utils/render.js","webpack:///./node_modules/core-js/internals/object-is-extensible.js","webpack:///./src/views/custom/jsxPreview.vue","webpack:///./src/views/custom/jsxPreview.vue?fa65","webpack:///./src/views/custom/jsxPreview.vue?cabf","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./node_modules/core-js/internals/array-buffer-non-extensible.js","webpack:///./node_modules/core-js/modules/es.object.freeze.js","webpack:///./node_modules/core-js/internals/internal-metadata.js","webpack:///src/views/custom/jsxPreview.vue"],"names":["makeMap","attrStr","expectsLowerCase","attrs","split","map","Object","create","forEach","t","val","toLowerCase","isAttr","vModel","self","dataObject","value","props","on","input","$emit","change","componentChild","prepend","h","conf","key","append","options","list","item","push","label","disabled","optionType","border","buttonText","showTip","fileSize","sizeUnit","accept","render","confClone","JSON","parse","stringify","this","formData","style","children","childObjs","tag","keys","childFunc","undefined","fails","isObject","classof","ARRAY_BUFFER_NON_EXTENSIBLE","$isExtensible","isExtensible","FAILS_ON_PRIMITIVES","module","exports","it","staticRenderFns","component","preventExtensions","ArrayBuffer","buffer","defineProperty","$","FREEZING","onFreeze","$freeze","freeze","target","stat","forced","sham","uncurryThis","hiddenKeys","hasOwn","f","getOwnPropertyNamesModule","getOwnPropertyNamesExternalModule","uid","REQUIRED","METADATA","id","setMetadata","objectID","weakData","fastKey","getWeakData","enable","meta","getOwnPropertyNames","splice","test","length","result","i","validator","callback","trigger","type","required","buildRules","rules","message","pattern","ctx","setData","_isMounted","colFormItem","labelWidth","isList","handleInput","rowFormItem","config","formSize","justify","align","gutter","Array","explain","divider","data","tableRefs","drawerTitle","drawerText","drawerVisible","containerWidth","confGlobal","formModel","ruleList","mounted","methods","submitForm","title","position","console","resetForm","resetTableData","checkTableData","res","showExplain","explainText","buildDrawer","visible","buildForm","model","size","labelPosition","ref","initDefaultData","getConfigByAjax","GET_MOCK_CONF"],"mappings":"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","file":"js/chunk-260a2716.bfa7ff22.js","sourcesContent":["const makeMap = ( attrStr, expectsLowerCase ) => {\r\n  const attrs = attrStr.split( ',' )\r\n  const map = Object.create( null )\r\n  attrs.forEach( t => map[t] = true )\r\n  return expectsLowerCase ?\r\n    val => map[val.toLowerCase()] :\r\n    val => map[val]\r\n}\r\n\r\n// 参考https://github.com/vuejs/vue/blob/v2.6.10/src/platforms/web/server/util.js\r\nconst isAttr = makeMap(\r\n  'accept,accept-charset,accesskey,action,align,alt,async,autocomplete,'\r\n  + 'autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,'\r\n  + 'checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,'\r\n  + 'name,contenteditable,contextmenu,controls,coords,data,datetime,default,'\r\n  + 'defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,'\r\n  + 'form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,'\r\n  + 'icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,'\r\n  + 'manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,'\r\n  + 'muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,'\r\n  + 'preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,'\r\n  + 'scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,'\r\n  + 'spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,'\r\n  + 'target,title,type,usemap,value,width,wrap'\r\n)\r\n\r\nfunction vModel ( self, dataObject, value ) {\r\n  dataObject.props.value = value\r\n  dataObject.on.input = val => {\r\n    self.$emit( 'input', val )\r\n  }\r\n  // 因为有些组件的v-model绑定的事件是change 所以这里也得监听\r\n  dataObject.on.change = val => {\r\n    self.$emit( 'input', val )\r\n  }\r\n}\r\n\r\nconst componentChild = {\r\n  'el-input': {\r\n    prepend ( h, conf, key ) {\r\n      return <template slot=\"prepend\">{conf[key]}</template>\r\n    },\r\n    append ( h, conf, key ) {\r\n      return <template slot=\"append\">{conf[key]}</template>\r\n    }\r\n  },\r\n  'el-select': {\r\n    options ( h, conf, key ) {\r\n      const list = []\r\n      conf.options.forEach( item => {\r\n        list.push( <el-option label={item.label} value={item.value} disabled={item.disabled}></el-option> )\r\n      } )\r\n      return list\r\n    }\r\n  },\r\n  'el-radio-group': {\r\n    options ( h, conf, key ) {\r\n      const list = []\r\n      conf.options.forEach( item => {\r\n        if ( conf.optionType === 'button' ) list.push( <el-radio-button label={item.value}>{item.label}</el-radio-button> )\r\n        else list.push( <el-radio label={item.value} border={conf.border}>{item.label}</el-radio> )\r\n      } )\r\n      return list\r\n    }\r\n  },\r\n  'el-checkbox-group': {\r\n    options ( h, conf, key ) {\r\n      const list = []\r\n      conf.options.forEach( item => {\r\n        if ( conf.optionType === 'button' ) {\r\n          list.push( <el-checkbox-button label={item.value}>{item.label}</el-checkbox-button> )\r\n        } else {\r\n          list.push( <el-checkbox label={item.value} border={conf.border}>{item.label}</el-checkbox> )\r\n        }\r\n      } )\r\n      return list\r\n    }\r\n  },\r\n  'el-upload': {\r\n    'list-type': ( h, conf, key ) => {\r\n      const list = []\r\n      if ( conf['list-type'] === 'picture-card' ) {\r\n        list.push( <i class=\"el-icon-plus\"></i> )\r\n      } else {\r\n        list.push( <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">{conf.buttonText}</el-button> )\r\n      }\r\n      if ( conf.showTip ) {\r\n        list.push( <div slot=\"tip\" class=\"el-upload__tip\">只能上传不超过 {conf.fileSize}{conf.sizeUnit} 的{conf.accept}文件</div> )\r\n      }\r\n      return list\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  create(){\r\n\r\n  },\r\n  render ( h ) {\r\n    const confClone = JSON.parse( JSON.stringify( this.conf ) )\r\n    const dataObject = {\r\n      attrs: {},\r\n      props: {\r\n        formData: this.formData,\r\n        value: this.value || confClone['defaultValue']\r\n      },\r\n      on: {},\r\n      style: {}\r\n    }\r\n    const children = []\r\n\r\n    const childObjs = componentChild[confClone.tag]\r\n    if ( childObjs ) {\r\n      Object.keys( childObjs ).forEach( key => {\r\n        const childFunc = childObjs[key]\r\n        if ( confClone[key] ) {\r\n          children.push( childFunc( h, confClone, key ) )\r\n        }\r\n      } )\r\n    }\r\n\r\n    Object.keys( confClone ).forEach( key => {\r\n      const val = confClone[key]\r\n      if ( key === 'vModel' ) {\r\n        vModel( this, dataObject, this.value === undefined ? confClone['defaultValue'] : this.value )\r\n      } else if ( dataObject[key] ) {\r\n        dataObject[key] = val\r\n      } else if ( !isAttr( key ) ) {\r\n        dataObject.props[key] = val\r\n      } else {\r\n        dataObject.attrs[key] = val\r\n      }\r\n    } )\r\n    return h( this.conf.tag, dataObject, children )\r\n  },\r\n  props: ['conf', 'value', 'formData']\r\n}","var fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es-x/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n","var render, staticRenderFns\nimport script from \"./jsxPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./jsxPreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./jsxPreview.vue?vue&type=style&index=0&id=4cfa97a5&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cfa97a5\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsxPreview.vue?vue&type=style&index=0&id=4cfa97a5&lang=stylus&scoped=true&\"","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es-x/no-object-isextensible, es-x/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = require('../internals/fails');\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es-x/no-object-isextensible, es-x/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n","var $ = require('../internals/export');\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\n\n// eslint-disable-next-line es-x/no-object-freeze -- safe\nvar $freeze = Object.freeze;\nvar FAILS_ON_PRIMITIVES = fails(function () { $freeze(1); });\n\n// `Object.freeze` method\n// https://tc39.es/ecma262/#sec-object.freeze\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  freeze: function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternalModule = require('../internals/object-get-own-property-names-external');\nvar isExtensible = require('../internals/object-is-extensible');\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","<script>\r\nimport render from '@/utils/render.js'\r\nimport { GET_MOCK_CONF } from '../../api'\r\nimport { trigger } from '@/components/DynamicForm/components/generator/config.js'\r\n/**\r\n * 校验组织机构组件是否为空\r\n */\r\nconst setFcOrgSelectRule = ( conf, ctx ) => {\r\n  return { \r\n    validator: (rule, value, callback) => {\r\n      var val = ctx.formModel[rule.field]\r\n      if (Object.keys(val || {}).length === 0) {\r\n        callback()\r\n        return\r\n      }\r\n\r\n      var count = 0\r\n      conf.tabList.forEach(key => {\r\n        val && Array.isArray(val[key]) && (count += val[key].length)\r\n      })\r\n      callback(count ? undefined : new Error(`${conf.title}不能为空`))\r\n    }, \r\n    trigger: trigger[conf.tag],\r\n    type: 'object',\r\n    required: true, \r\n  }\r\n}\r\n/**\r\n * 收集表单必填项并组装成ElementUI表单校验得rules选项\r\n * 表格除外 表格自带校验\r\n */\r\nfunction buildRules ( conf, ctx ) {\r\n  if ( conf.vModel === undefined ||  !trigger[conf.tag]) return\r\n  const rules = []\r\n  if ( conf.required ) {\r\n    const type = Array.isArray( conf.defaultValue ) ? 'array' : undefined\r\n    let message = Array.isArray( conf.defaultValue ) ? `请至少选择一个` : conf.placeholder\r\n    if ( message === undefined ) message = `${conf.label}不能为空`\r\n    conf.tag === 'fc-org-select'\r\n      ? rules.push( setFcOrgSelectRule( conf, ctx ) )\r\n      : rules.push( { required: true, type, message, trigger: trigger[conf.tag] } )\r\n  }\r\n  // 自定义正则匹配\r\n  if ( conf.regList && Array.isArray( conf.regList ) ) {\r\n    conf.regList.forEach( item => {\r\n      if ( item.pattern ) {\r\n        rules.push( { pattern: eval( item.pattern ), message: item.message, trigger: trigger[conf.tag] } )\r\n      }\r\n    } )\r\n  }\r\n  ctx.ruleList[conf.vModel] = rules\r\n}\r\n\r\n\r\nvar setData = (ctx, val, prop, init = false) => {\r\n  if (!prop) return\r\n  ctx.$set(ctx.formModel, prop, val)\r\n}\r\n\r\nvar _isMounted = false // 收集默认值 渲染完成之后防止重复收集默认值\r\n\r\nconst buildData = (ctx, value, prop) => setData(ctx, value, prop, true)\r\n\r\nconst layouts = {\r\n  colFormItem: function (conf,  h, ctx, isList = false,) {\r\n    buildRules(conf, ctx)\r\n    !_isMounted && buildData(ctx, conf.defaultValue, conf.vModel)\r\n    let labelWidth = ''\r\n    if ( conf.labelWidth ) labelWidth = `${conf.labelWidth}px`\r\n    if ( isList ) labelWidth = \"0px\"\r\n    const required = ( !trigger[conf.tag] && conf.required ) || conf.tag === 'fc-org-select' \r\n    const handleInput = val => {\r\n      setData(ctx, val, conf.vModel)\r\n      if (conf.tag === 'fc-org-select') {\r\n        /**\r\n         * 组织机构组件数据复杂 \r\n         * async-validator不一定能准确捕获到数据变化 \r\n         * 所以在这里手动校验一次\r\n         */\r\n        ctx.$refs[ctx.confGlobal.formRef].validateField(conf.vModel,()=>{ })\r\n      }\r\n    }\r\n    let item =  <el-col span={conf.span}>\r\n                  <el-form-item \r\n                  label-width={labelWidth} \r\n                  label={isList ? '' : conf.label} \r\n                  prop={conf.vModel}>\r\n                    <render\r\n                    formData={ctx.formModel}\r\n                    conf={conf} \r\n                    value={ctx.formModel[conf.vModel]} \r\n                    ref={conf.rowType === 'table' ? conf.vModel : undefined} \r\n                    onInput={handleInput} \r\n                    />\r\n                  </el-form-item>\r\n                </el-col>\r\n\r\n    if (isList) {\r\n      var tableTitle = <el-col span={24} style=\"font-size: 14px;padding:6px 0px;margin-bottom: 4px;border-bottom: 1px solid #e5e5e5;\">{conf.label}</el-col>\r\n      return [tableTitle, item]\r\n    }\r\n    return item\r\n  },\r\n\r\n  rowFormItem: function (conf, h, ctx) {\r\n     if ( conf.rowType === 'table' ) {\r\n       ctx.tableRefs[conf.vModel] = conf\r\n       const param = {...conf, config: conf, formSize: ctx.confGlobal.size, labelWidth: `${conf.labelWidth || ctx.confGlobal.labelWidth}px`}\r\n       return this.colFormItem( param, h, ctx, conf.type === 'list' )\r\n    }\r\n    buildRules(conf, ctx)\r\n    const props = {\r\n      type: conf.type === 'default' ? undefined : conf.type,\r\n      justify: conf.type === 'default' ? undefined : conf.justify,\r\n      align: conf.type === 'default' ? undefined : conf.align,\r\n      gutter: typeof conf.gutter === 'number' ? conf.gutter : undefined,\r\n    }\r\n    let row = <el-col span={conf.span || 24}>\r\n                <el-row {...{ props: props }}>\r\n                  { Array.isArray(conf.children) && conf.children.map( ( el ) => layouts[el.layout]( el, h, ctx ) ) }\r\n                </el-row>\r\n              </el-col>\r\n    let divider\r\n    if (conf.showDivider) {\r\n      let explain\r\n      if (conf.cmpType === 'custom' && conf.explain) {\r\n        explain = <el-tooltip effect=\"dark\" content=\"组件说明\" placement=\"top\">\r\n                    <i class=\"el-icon-info\"\r\n                      onClick={ctx.showExplain.bind(this, conf.explain, conf.label)}\r\n                      style=\"margin-right: 8px; color: #E6A23C;cursor: pointer;\">\r\n                    </i>\r\n                  </el-tooltip>\r\n      }\r\n      divider = <el-col span={24}>\r\n                  <el-divider content-position=\"left\" >{explain} {conf.label}</el-divider>\r\n                </el-col>\r\n      return [divider, row]\r\n    } \r\n    return row\r\n  },\r\n}\r\n\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      tableRefs: {},\r\n      drawerTitle: '',\r\n      drawerText: '',\r\n      drawerVisible: false,\r\n      containerWidth: 66,\r\n      confGlobal: this.$route.params.formData || null,\r\n      formModel: {},\r\n      ruleList: {}\r\n    }\r\n  },\r\n  mounted(){\r\n    if (!this.confGlobal) {\r\n      this.getConfigByAjax();\r\n    } else {\r\n      this.initDefaultData(this.confGlobal);\r\n    }\r\n    _isMounted = true;\r\n  },\r\n  methods: {\r\n    submitForm () {\r\n      const isTableValid = this.checkTableData()\r\n      this.$refs[this.confGlobal.formRef].validate(valid => {\r\n        if(!valid) return\r\n        if (!isTableValid) return\r\n        this.$notify({\r\n          title: '表单数据',\r\n          message: '请在控制台中查看数据输出',\r\n          position: 'bottom-right'\r\n        });\r\n        console.log('表单数据', this.formModel)\r\n        // TODO 提交表单\r\n      })\r\n    },\r\n\r\n    resetForm() {\r\n      this.$refs[this.confGlobal.formRef].resetFields()\r\n      this.resetTableData()\r\n    },\r\n\r\n    resetTableData(){\r\n      Object.keys(this.tableRefs).forEach(vModel => {\r\n        // 由于render.js返回的动态组件 所以动态组件相当于是render的子组件\r\n        const res = this.$refs[vModel]['$children'][0].reset()\r\n      })\r\n    },\r\n\r\n    checkTableData () {\r\n      let valid = true\r\n      Object.keys(this.tableRefs).forEach(vModel => {\r\n        const res = this.$refs[vModel].$children[0].submit()  // 返回false或表单数据\r\n        res ? (this.formModel[vModel] = res) : (valid = false)\r\n      })\r\n      return valid\r\n    },\r\n\r\n    showExplain (explainText, title) {\r\n      if(!explainText) return\r\n      this.drawerTitle = title\r\n      this.drawerText = explainText\r\n      this.drawerVisible = true\r\n    },\r\n\r\n    buildDrawer (h) {\r\n      var content = <pre style=\"padding-left: 1rem;\">{this.drawerText}</pre>\r\n      return h('el-drawer', {\r\n        props: {\r\n          title: this.drawerTitle + '说明',\r\n          visible: this.drawerVisible,\r\n        },\r\n        on: {\r\n          'update:visible': val => this.drawerVisible = val\r\n        }\r\n      },\r\n      [content])\r\n    },\r\n\r\n    buildForm (h) {\r\n      let labelPosition = this.confGlobal.labelPosition || 'left'\r\n      const content = this.confGlobal.fields.map(c => layouts[c.layout](c, h, this))\r\n      const formObject = {\r\n        props: {\r\n          model: this.formModel,\r\n          rules: this.ruleList,\r\n          size: this.confGlobal.size,\r\n          labelWidth: this.confGlobal.labelWidth + 'px',\r\n          labelPosition: this.confGlobal.labelPosition || undefined\r\n        },\r\n        ref: this.confGlobal.formRef\r\n      }\r\n      const btns = <el-col span={24}>\r\n                    <el-form-item  style=\"text-align:right;\">\r\n                      <el-button type=\"primary\" onClick={this.submitForm}>提交</el-button>\r\n                      <el-button onClick={this.resetForm}>重置</el-button>\r\n                    </el-form-item>\r\n                  </el-col>\r\n      // 因为使用jsx时  el-form 的 model 一直无法正确填充，故采用createElement直接渲染\r\n      return h('el-form', formObject, [content, btns]) \r\n    },\r\n    initDefaultData(config) {\r\n      config.fields.forEach(field => {\r\n        this.$set(this.formModel, field.vModel, field.defaultValue);\r\n      });\r\n    },\r\n    getConfigByAjax() {\r\n      GET_MOCK_CONF().then(res => {\r\n        this.confGlobal = Object.freeze(res.formData);\r\n        this.initDefaultData(res.formData);\r\n      });\r\n    }\r\n  },\r\n\r\n  render (h) {\r\n    if (!this.confGlobal) {\r\n      return <div v-loading=\"true\" class=\"loading-mask\"></div>\r\n    }\r\n    return  <div class=\"preview-container\" style={'width:' + this.containerWidth + '%;'}>\r\n              <el-row gutter={this.confGlobal.gutter} style=\"padding: 2rem 2rem 0;\">\r\n                {this.buildForm(h)}\r\n              </el-row>\r\n              <div  class=\"width-slider\">\r\n                <el-slider vModel={this.containerWidth} min={30} max={96}></el-slider>\r\n              </div>\r\n              {this.buildDrawer(h)}\r\n            </div>\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.preview-container \r\n  margin 3rem auto 1rem\r\n  border-radius 6px\r\n  box-shadow 0 0 15px rgba(0, 0, 0, .1)\r\n  \r\n  .width-slider\r\n    width  150px\r\n    position absolute\r\n    top 0\r\n    right 2rem\r\n\r\n.showDivider.form-container { \r\n  margin-bottom: 2rem; \r\n}\r\n.loading-mask {\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n</style>\r\n"],"sourceRoot":""}